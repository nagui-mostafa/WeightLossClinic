# ADR 0001 — ORM Selection (Prisma vs TypeORM)

## Status

Accepted — 2025-10-24

## Context

The Weight Loss Clinic API requires a type-safe, developer-friendly data layer on top of PostgreSQL. Candidates considered:

- **TypeORM** — long-standing NestJS integration, active community.
- **Prisma** — modern schema-first approach, strong TypeScript support, migration tooling.

Key requirements:

- Schema management and migrations checked into VCS.
- Ability to hash/store sensitive data securely.
- Efficient query building for filters/pagination.
- Developer ergonomics (type generation, DX).

## Decision

Choose **Prisma** as the ORM.

## Consequences

### Positive

- Schema file (`prisma/schema.prisma`) acts as single source of truth.
- Generated types provide end-to-end type safety.
- Prisma Client offers composable, readable queries (good for filters/pagination).
- Built-in migration engine and seeding support.
- Easy to integrate with NestJS DI (via `PrismaService`).

### Negative / Mitigations

- Requires `prisma generate` step during builds/deploys — documented in CI/Docker.
- Some advanced SQL features require fallback to `$queryRaw` — acceptable for this domain.
- Additional dependency (`prisma` CLI) added to dev stack.

Overall, Prisma best satisfies developer experience and reliability needs for this project.
